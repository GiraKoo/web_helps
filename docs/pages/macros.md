# 常用宏值整理

## 系统宏

|宏名|说明|
|---|---|
|WIN32|包含windows.h头文件即定义，不区分操作系统是x86还是x64|
|\_WIN32|VS编译器定义，不区分操作系统是x86还是x64|
|\_WIN64|VS编译器定义，x64平台|
|\_\_x86_64\_\_|Unix平台，x86平台|
|\_\_i386\_\_|Unix平台，x64平台|
|\_\_amd64、\_\_amd64\_\_|amd平台|
|||

进行平台区分的范例代码：  
```c++
// windows平台
#ifdef _WIN32
    #ifdef _WIN64
        // x64平台
    #else
        // x86平台
    #endif
#elif __APPLE__
    #include "TargetConditionals.h"
    #if TARGET_IPHONE_SIMULATOR
         // iOS Simulator
    #elif TARGET_OS_IPHONE
        // iOS device
    #elif TARGET_OS_MAC
        // Other kinds of Mac OS
    #else
        #error "Unknown Apple platform"
    #endif
#elif __ANDROID__
    // 安卓平台
#elif __MINGW32__
    // mingw32平台
#elif __MINGW64__
    // mingw64平台
#elif __CYGWIN__
    // cygwin平台
#elif __linux__
    // linux平台
#elif __unix__
    // unix平台
#else
    // 未知平台
#endif
```

## 编译器宏

!!! note "_MSC_VER"

    |IDE|发布时间|工具集版本|_MSC_VER|MSVC++|系统支持|使用频率|
    |:---:|:---:|:---:|:---:|:---:|:---:|:---:|
    |Visual C++6.0	|1998	|V60	|1200	|MSVC++ 6.0	|XP、Win7	|高频|
    |Visual Studio 2002	|2002	|V70	|1300	|MSVC++ 7.0	|XP、Win7	|低频|
    |Visual Studio 2003	|2003	|V71	|1310	|MSVC++ 7.1	|XP、Win7	|低频|
    |Visual Studio 2005	|2005	|V80	|1400	|MSVC++ 8.0	|XP、Win7	|中频|
    |Visual Studio 2008	|2008	|V90	|1500	|MSVC++ 9.0	|XP、Win7	|高频|
    |Visual Studio 2010	|2010	|V100	|1600	|MSVC++ 10.0	|XP、Win7	|高频|
    |Visual Studio 2012	|2012	|V110	|1700	|MSVC++ 11.0	|XP、Win7	|中频|
    |Visual Studio 2013	|2013	|V120	|1800	|MSVC++ 12.0	|Win11、Win10、Win7	|高频|
    |Visual Studio 2015	|2015	|V140	|1900	|MSVC++ 14.0	|Win11、Win10、Win7	|中频|
    |Visual Studio 2017	|2017	|V141	|1910	|MSVC++ 14.1	|Win11、Win10、Win7	|中频|
    |Visual Studio 2019	|2019	|V142	|1920	|MSVC++ 14.2	|Win11、Win10、Win7	|中频|
    |Visual Studio 2022	|2022	|V143	|1930	|MSVC++ 14.3	|Win11、Win10、Win7	|中频|

## C++标准宏

参考：https://en.cppreference.com/w/cpp/preprocessor/replace

!!! note "\_\_cplusplus"

    denotes the version of C++ standard that is being used, expands to value  
    提供当前编译器的C++标准版本，将会被扩展为以下整数常量  
    - 199711L(until C++11),  
    - 201103L(C++11),  
    - 201402L(C++14),  
    - 201703L(C++17),  
    - 202002L(C++20), or 202302L(C++23)  

!!! note "\_\_STDC_HOSTED\_\_"
    
    (C++11)  
    expands to the integer constant 1 if the implementation is hosted (runs under an OS), ​0​ if freestanding (runs without an OS)  
    如果实现托管 (在OS下运行)，则扩展为整数常量1，如果独立 (在没有OS的情况下运行)，则扩展为0
    

!!! note "\_\_FILE\_\_"
 
    expands to the name of the current file, as a character string literal, can be changed by the #line directive  
    扩展为当前文件的名称，作为字符串文本，可以通过 #line 指令进行更改

!!! note "\_\_LINE\_\_"
 
    expands to the source file line number, an integer constant, can be changed by the #line directive  
    展开到源文件行号，一个整数常量，可以通过 #line 指令更改

!!! note "\_\_DATE\_\_"
 
    expands to the date of translation, a character string literal of the form "Mmm dd yyyy". The first character of "dd" is a space if the day of the month is less than 10. The name of the month is as if generated by std::asctime()  
    扩展到翻译日期，格式为“Mmm dd yyyy”的字符串文字。如果月份中的某天小于10，则"dd"的第一个字符是一个空格。月份的名称好像由std::asctime()生成

!!! note "\_\_TIME\_\_"
    
    expands to the time of translation, a character string literal of the form "hh:mm:ss"  
    扩展到翻译时间，格式为“hh:mm:ss”的字符串文字
